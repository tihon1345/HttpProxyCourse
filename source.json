{
  "topics": [
    {
      "title": "Введение в HTTP Proxy",
      "htmlContent": "<p><b>HTTP Прокси-сервер</b> — это промежуточный узел (посредник) в компьютерной сети, который выступает в роли шлюза между пользователем (клиентом) и интернетом (целевым сервером). При использовании прокси сетевой трафик проходит через него: сначала запрос отправляется на прокси, а затем прокси пересылает его по назначению и возвращает ответ пользователю.</p><p>Важно различать два основных типа:</p><ul><li><b>Forward Proxy (Прямой прокси):</b> Работает в интересах клиента. Обычно используется для обхода ограничений доступа, сокрытия реального IP-адреса пользователя или контроля исходящего трафика в корпоративных сетях.</li><li><b>Reverse Proxy (Обратный прокси):</b> Работает в интересах сервера. Он принимает запросы из интернета и передает их на внутренние серверы, обеспечивая защиту от атак, балансировку нагрузки и SSL-шифрование.</li></ul><p>Использование прокси-серверов дает ряд ключевых преимуществ:</p><ul><li><b>Кэширование:</b> Сохранение копий часто запрашиваемых ресурсов для ускорения загрузки и экономии трафика.</li><li><b>Анонимность:</b> Сокрытие информации о клиенте от целевого ресурса.</li><li><b>Фильтрация и контроль:</b> Блокировка нежелательных сайтов, рекламы или вредоносного ПО.</li></ul>",
      "questions": [
        {
          "text": "Какое определение наиболее точно описывает роль HTTP прокси-сервера?",
          "variants": [
            "Это база данных для хранения учетных записей пользователей.",
            "Это посредник между клиентом и сервером, пересылающий запросы и ответы.",
            "Это протокол для прямой передачи файлов между компьютерами.",
            "Это антивирусная программа для защиты рабочего стола."
          ],
          "correctIndex": 1
        },
        {
          "text": "В чем заключается основная функция Reverse Proxy (Обратного прокси)?",
          "variants": [
            "Защита внутренних серверов и распределение нагрузки (балансировка).",
            "Помощь пользователю в обходе блокировок провайдера.",
            "Ускорение работы локальной сети принтеров.",
            "Генерация паролей для администраторов."
          ],
          "correctIndex": 0
        },
        {
          "text": "Какой механизм прокси-сервера позволяет уменьшить потребление трафика и ускорить загрузку страниц?",
          "variants": [
            "Шифрование данных (SSL).",
            "Аутентификация пользователя.",
            "Кэширование данных.",
            "Логирование запросов."
          ],
          "correctIndex": 2
        }
      ]
    },
    {
      "title": "Специфичные заголовки Proxy",
      "htmlContent": "<h3>Идентификация клиента за Прокси</h3><p>Когда клиент делает запрос через прокси-сервер, целевой веб-сервер видит входящее соединение от IP-адреса прокси, а не от пользователя. Чтобы сохранить информацию об источнике, используются специальные заголовки.</p><h4>1. X-Forwarded-For (XFF)</h4><p>Это стандарт де-факто для идентификации исходного IP-адреса клиента. Формат:</p><blockquote>X-Forwarded-For: client, proxy1, proxy2</blockquote><p>Левый адрес — это IP оригинального клиента. Следующие — адреса прокси, через которые прошел пакет.</p><h4>2. Via</h4><p>Заголовок <b>Via</b> добавляется прокси-серверами (прямыми и обратными). Он показывает:</p><ul><li>Версию протокола (HTTP/1.1 и т.д.).</li><li>Имя или псевдоним прокси-сервера.</li></ul><p>Это помогает обнаруживать петли маршрутизации и определять цепочку посредников.</p><h4>3. X-Forwarded-Proto</h4><p>Показывает схему (<b>http</b> или <b>https</b>), которую использовал клиент. Это критично при <i>SSL Offloading</i> (когда шифрование снимается на прокси), чтобы приложение не пыталось бесконечно перенаправлять пользователя на HTTPS.</p>",
      "questions": [
        {
          "text": "Какой заголовок используется для передачи реального IP-адреса клиента через прокси?",
          "variants": [
            "X-Real-IP-Config",
            "Via",
            "X-Forwarded-For",
            "Proxy-Client-IP"
          ],
          "correctIndex": 2
        },
        {
          "text": "Для чего в основном используется заголовок Via?",
          "variants": [
            "Для передачи пароля администратора",
            "Для отслеживания пути запроса через цепочку прокси",
            "Для шифрования тела запроса",
            "Для увеличения скорости загрузки"
          ],
          "correctIndex": 1
        },
        {
          "text": "Зачем нужен заголовок X-Forwarded-Proto?",
          "variants": [
            "Чтобы сервер знал, какой протокол (http/https) использовал клиент",
            "Чтобы узнать версию операционной системы клиента",
            "Для проверки лицензии прокси-сервера",
            "Для сжатия данных"
          ],
          "correctIndex": 0
        }
      ]
    },
    {
      "title": "Коды состояния HTTP и Прокси",
      "htmlContent": "<h3>Ошибки шлюзов и прокси</h3><p>Прокси-серверы могут возвращать специфические коды ошибок, указывающие на проблемы связи с целевым сервером (upstream).</p><h4>502 Bad Gateway</h4><p>Прокси-сервер, действуя как шлюз, получил <b>некорректный ответ</b> от вышестоящего сервера. Это часто случается, если целевой сервер упал, разорвал соединение или вернул данные, не соответствующие протоколу HTTP.</p><h4>503 Service Unavailable</h4><p>Сервер не готов обработать запрос. Обычно это означает, что сервер перегружен или находится на техническом обслуживании. Прокси просто транслирует этот ответ.</p><h4>504 Gateway Timeout</h4><p>Прокси-сервер <b>не дождался</b> ответа от целевого сервера за установленное время (timeout). Это значит, что целевой сервер работает слишком медленно или сетевое соединение потеряно.</p><h4>407 Proxy Authentication Required</h4><p>Этот код похож на 401 (Unauthorized), но указывает, что клиент должен сначала пройти аутентификацию на <b>прокси-сервере</b>. Браузер обычно показывает всплывающее окно для ввода логина/пароля прокси.</p>",
      "questions": [
        {
          "text": "В чем основное отличие ошибки 502 от 504?",
          "variants": [
            "502 — это ошибка клиента, 504 — ошибка сервера",
            "502 — сервер вернул мусор/ошибку, 504 — сервер не ответил вовремя",
            "502 — требуется пароль, 504 — сервер перегружен",
            "Различий нет, это одно и то же"
          ],
          "correctIndex": 1
        },
        {
          "text": "Что означает код 407?",
          "variants": [
            "Ресурс не найден на целевом сервере",
            "Внутренняя ошибка прокси",
            "Требуется аутентификация на прокси-сервере",
            "Доступ к сайту запрещен администратором"
          ],
          "correctIndex": 2
        },
        {
          "text": "Какую ошибку вернет прокси, если целевой сервер мгновенно сбросил соединение (RST) при попытке подключения?",
          "variants": [
            "200 OK",
            "502 Bad Gateway",
            "404 Not Found",
            "407 Proxy Authentication Required"
          ],
          "correctIndex": 1
        }
      ]
    },
    {
        "title": "Проксирование HTTPS и метод CONNECT",
        "htmlContent": "<p>Большая часть современного трафика зашифрована (HTTPS). Прокси-сервер не может прочитать заголовки или тело таких запросов, не нарушая шифрование.</p><h3>HTTP Tunneling</h3><p>Для работы с HTTPS используется метод <b>CONNECT</b>. Клиент просит прокси создать TCP-туннель до целевого сервера:</p><blockquote>CONNECT google.com:443 HTTP/1.1</blockquote><p>После установления соединения прокси просто пересылает байты от клиента к серверу и обратно, <b>не анализируя</b> их содержимое (Blind Relay). В этом случае заголовки типа <i>X-Forwarded-For</i> обычно не добавляются, так как они являются частью зашифрованного потока данных.</p><h3>MITM (Man-in-the-Middle) Proxy</h3><p>В корпоративных сетях или для отладки (например, через Charles/Fiddler) используются прокси с расшифровкой SSL. Прокси подменяет сертификат целевого сайта на свой собственный. Клиент должен доверять корневому сертификату прокси, чтобы это работало без ошибок безопасности.</p>",
        "questions": [
          {
            "text": "Какой HTTP метод используется для создания туннеля при проксировании HTTPS трафика?",
            "variants": [
              "POST",
              "GET",
              "CONNECT",
              "OPTIONS"
            ],
            "correctIndex": 2
          },
          {
            "text": "Может ли обычный прокси-сервер (без MITM) добавить заголовок X-Forwarded-For в HTTPS запрос?",
            "variants": [
              "Да, всегда добавляет.",
              "Нет, так как заголовки зашифрованы внутри TLS соединения.",
              "Да, если администратор разрешил это в настройках.",
              "Только если используется версия HTTP/2."
            ],
            "correctIndex": 1
          }
        ]
    }
  ]
}
